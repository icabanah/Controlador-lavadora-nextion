; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
description = Controladora de lavadora industrial con ESP32 y Nextion

[env:esp32dev]
; Versión 6.7.0 por compatibilidad con HX710B y AsyncTaskLib
platform = espressif32@~6.7.0
board = esp32dev
framework = arduino

; Librerías del registro (actualizadas y compatibles)
lib_deps =
    paulstoffregen/OneWire@^2.3.8
    milesburton/DallasTemperature@^3.9.0

; Librerías locales en carpeta lib/:
; - HX710B (sensor de presión - local porque no está en registry)
; - AsyncTaskLib (tareas asíncronas)
; - Adafruit_BusIO (dependencia si se necesita I2C/SPI)

; Configuración del monitor serial
monitor_speed = 115200
monitor_filters =
	default
	colorize        ; Colorea warnings/errores
	time            ; Agrega timestamp a cada línea

; Opciones de compilación y debugging
build_flags =
	-D CORE_DEBUG_LEVEL=3        ; Nivel de debug del core (0=None, 3=Verbose)
	-D DEBUG_ESP_PORT=Serial     ; Puerto para debug (Serial0)
	-D DEBUG_ESP_CORE            ; Debug del core ESP32
	-D ENABLE_DEBUG=1            ; Flag personalizado para debug

; Optimización para debugging (descomenta para debug más fácil)
; build_type = debug
; build_flags =
;     ${env:esp32dev.build_flags}
;     -O0                         ; Sin optimización
;     -g3                         ; Máxima info de debug
;     -ggdb

; ========================================
; UNIT TESTING
; ========================================
test_framework = unity
test_build_src = yes
